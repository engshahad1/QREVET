<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <title>لوحة فني المختبر</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body { font-family: 'Cairo', sans-serif; }
  </style>
</head>
<body class="bg-gray-100 p-6 text-center">

  <h1 class="text-2xl font-bold text-orange-600 mb-6">لوحة فني المختبر</h1>

  <div id="animalList" class="grid gap-4 max-w-4xl mx-auto"></div>

  <script>
    function loadAnimals() {
      const container = document.getElementById("animalList");
      container.innerHTML = "";
      const animals = JSON.parse(localStorage.getItem("animals") || "[]");

      animals.forEach((animal, index) => {
        const card = document.createElement("div");
        card.className = "bg-white rounded-lg shadow p-4 text-right";

        card.innerHTML = `
          <p><strong>الاسم:</strong> ${animal.name}</p>
          <p><strong>النوع:</strong> ${animal.type}</p>
          <p><strong>المالك:</strong> ${animal.owner}</p>
          <p><strong>الهوية:</strong> ${animal.id}</p>
          <p><strong>الجوال:</strong> ${animal.phone}</p>
          ${animal.image ? `<img src="${animal.image}" alt="صورة الحيوان" class="mt-2 max-w-xs rounded-lg border" />` : ''}
          <div class="mt-4">
            <input type="text" placeholder="نتيجة الفحص" class="result-input w-full p-2 border rounded" data-index="${index}" value="${animal.result || ''}">
            <button onclick="saveResult(${index})" class="mt-2 w-full bg-green-600 hover:bg-green-700 text-white py-2 rounded">
              حفظ النتيجة
            </button>
          </div>
          ${animal.result ? `<p class="mt-2 text-green-600"><strong>النتيجة:</strong> ${animal.result}</p>` : ''}
        `;

        container.appendChild(card);
      });
    }

    function saveResult(index) {
      const input = document.querySelector(`.result-input[data-index="${index}"]`);
      const animals = JSON.parse(localStorage.getItem("animals") || "[]");
      animals[index].result = input.value.trim();
      localStorage.setItem("animals", JSON.stringify(animals));
      loadAnimals();
    }

    window.onload = loadAnimals;
  </script>
</body>
</html>
