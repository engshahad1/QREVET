<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <title>لوحة تحكم الطبيب البيطري</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body { font-family: 'Cairo', sans-serif; }
  </style>
</head>
<body class="bg-gray-100 p-6 text-center">

  <h1 class="text-2xl font-bold text-orange-600 mb-6">لوحة تحكم الطبيب البيطري</h1>

  <div class="max-w-xl mx-auto bg-white rounded-xl shadow-md p-6 space-y-4">
    <input id="animalName" type="text" placeholder="اسم الحيوان" class="w-full p-2 border rounded" />
    <input id="animalType" type="text" placeholder="نوع الحيوان" class="w-full p-2 border rounded" />
    <input id="ownerName" type="text" placeholder="اسم المالك" class="w-full p-2 border rounded" />
    <input id="ownerID" type="text" placeholder="هوية المالك" class="w-full p-2 border rounded" />
    <input id="phone" type="text" placeholder="رقم الجوال" class="w-full p-2 border rounded" />
    <input id="animalImage" type="file" accept="image/*" class="w-full p-2 border rounded" />

    <button onclick="addAnimal()" class="bg-orange-500 hover:bg-orange-600 text-white font-bold py-2 px-4 rounded w-full">
      إنشاء طلب فحص
    </button>
  </div>

  <h2 class="text-xl font-semibold mt-10 mb-4">الحيوانات التي تم تسجيلها</h2>
  <div id="animalList" class="grid gap-4 max-w-3xl mx-auto"></div>

  <script>
    function loadAnimals() {
      const animalList = document.getElementById("animalList");
      animalList.innerHTML = "";
      const animals = JSON.parse(localStorage.getItem("animals") || "[]");

      animals.forEach((animal, index) => {
        const card = document.createElement("div");
        card.className = "bg-white rounded-lg shadow p-4 text-right";

        card.innerHTML = `
          <p><strong>الاسم:</strong> ${animal.name}</p>
          <p><strong>النوع:</strong> ${animal.type}</p>
          <p><strong>المالك:</strong> ${animal.owner}</p>
          <p><strong>الهوية:</strong> ${animal.id}</p>
          <p><strong>الجوال:</strong> ${animal.phone}</p>
          ${animal.image ? `<img src="${animal.image}" alt="صورة الحيوان" class="mt-2 max-w-xs rounded-lg border" />` : ''}
        `;
        animalList.appendChild(card);
      });
    }

    function addAnimal() {
      const name = document.getElementById("animalName").value.trim();
      const type = document.getElementById("animalType").value.trim();
      const owner = document.getElementById("ownerName").value.trim();
      const id = document.getElementById("ownerID").value.trim();
      const phone = document.getElementById("phone").value.trim();
      const imageInput = document.getElementById("animalImage");

      const reader = new FileReader();
      reader.onload = function () {
        const imageBase64 = reader.result;

        const animal = { name, type, owner, id, phone, image: imageBase64 };
        const animals = JSON.parse(localStorage.getItem("animals") || "[]");
        animals.push(animal);
        localStorage.setItem("animals", JSON.stringify(animals));
        loadAnimals();

        // إعادة تعيين النموذج
        document.getElementById("animalName").value = "";
        document.getElementById("animalType").value = "";
        document.getElementById("ownerName").value = "";
        document.getElementById("ownerID").value = "";
        document.getElementById("phone").value = "";
        imageInput.value = "";
      };

      if (imageInput.files[0]) {
        reader.readAsDataURL(imageInput.files[0]);
      } else {
        reader.onload(); // بدون صورة
      }
    }

    window.onload = loadAnimals;
  </script>
</body>
</html>
